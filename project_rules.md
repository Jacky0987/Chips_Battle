# Chips Battle 项目规则文档

## 1. 项目管理方式

### 1.1 开发流程
- **敏捷开发**: 采用Scrum敏捷开发方法
- **迭代周期**: 每个Sprint为期2周
- **版本发布**: 月度版本发布
- **代码审查**: 所有代码提交必须经过代码审查

### 1.2 分支管理
- **主分支**: main - 稳定版本代码
- **开发分支**: develop - 开发中的最新代码
- **功能分支**: feature/功能名 - 新功能开发
- **修复分支**: hotfix/问题描述 - 紧急修复
- **发布分支**: release/版本号 - 发布准备

### 1.3 提交规范
- **提交信息格式**: type(scope): description
- **类型说明**:
  - feat: 新功能
  - fix: 修复bug
  - docs: 文档更新
  - style: 代码格式调整
  - refactor: 代码重构
  - test: 测试相关
  - chore: 构建过程或辅助工具的变动

## 2. 命名规范

### 2.1 文件命名
- **全英文命名**: 所有文件名必须使用英文
- **小写字母**: 文件名全部使用小写字母
- **下划线分隔**: 多个单词使用下划线分隔
- **示例**: user_service.py, bank_account.py

### 2.2 目录命名
- **全英文命名**: 所有目录名必须使用英文
- **小写字母**: 目录名全部使用小写字母
- **下划线分隔**: 多个单词使用下划线分隔
- **复数形式**: 禁止使用复数形式
- **示例**: models, services, commands

### 2.3 类命名
- **大驼峰命名**: 遵循大驼峰命名法（PascalCase）
- **清晰表达**: 类名应清晰表达其职责
- **示例**: UserService, BankAccount, StockMarket

### 2.4 函数命名
- **小驼峰命名**: 遵循小驼峰命名法（camelCase）
- **动词开头**: 函数名应以动词开头
- **示例**: getUserInfo(), calculateInterest(), processTransaction()

### 2.5 变量命名
- **小驼峰命名**: 遵循小驼峰命名法（camelCase）
- **语义明确**: 变量名应具有明确的语义
- **避免缩写**: 除非是广泛认可的缩写
- **示例**: userName, accountBalance, transactionHistory

### 2.6 常量命名
- **大写字母**: 全部使用大写字母
- **下划线分隔**: 多个单词使用下划线分隔
- **示例**: MAX_RETRY_COUNT, DEFAULT_TIMEOUT

## 3. 代码规范

### 3.1 Python代码规范
- **遵循PEP8**: 严格遵守PEP8编码规范
- **行长度**: 每行不超过88个字符
- **缩进**: 使用4个空格进行缩进
- **导入顺序**: 标准库、第三方库、本地库，按字母顺序排列

### 3.2 注释规范
- **函数注释**: 使用文档字符串描述函数功能、参数和返回值
- **行内注释**: 关键代码行需要添加行内注释
- **复杂逻辑**: 复杂算法需要详细注释说明
- **示例**:
```python
def calculate_interest(principal, rate, time):
    """
    计算利息
    
    Args:
        principal (float): 本金
        rate (float): 利率
        time (int): 时间（年）
        
    Returns:
        float: 利息金额
    """
    return principal * rate * time
```

### 3.3 类设计规范
- **单一职责**: 每个类应该只有一个改变的理由
- **开闭原则**: 对扩展开放，对修改关闭
- **里氏替换**: 子类应该能够替换父类
- **接口隔离**: 使用多个专门的接口而不是一个总接口
- **依赖倒置**: 依赖抽象而不是具体实现

## 4. 数据库设计规范

### 4.1 表命名
- **小写字母**: 表名全部使用小写字母
- **下划线分隔**: 多个单词使用下划线分隔
- **复数形式**: 禁止使用复数形式
- **示例**: user, bank_account, stock_transaction

### 4.2 字段命名
- **小写字母**: 字段名全部使用小写字母
- **下划线分隔**: 多个单词使用下划线分隔
- **语义明确**: 字段名应具有明确的语义
- **示例**: user_id, created_at, account_balance

### 4.3 主键设计
- **自增主键**: 使用id作为自增主键字段
- **类型统一**: 主键类型统一使用Integer
- **示例**: id = Column(Integer, primary_key=True)

## 5. API设计规范

### 5.1 接口命名
- **RESTful风格**: 遵循RESTful API设计原则
- **名词复数**: 资源名使用复数形式
- **小写字母**: 全部使用小写字母
- **示例**: /api/users, /api/bank-accounts

### 5.2 HTTP方法
- **GET**: 获取资源
- **POST**: 创建资源
- **PUT**: 更新资源
- **DELETE**: 删除资源
- **PATCH**: 部分更新

### 5.3 响应格式
- **统一格式**: 所有API响应使用统一格式
- **状态码**: 使用标准HTTP状态码
- **示例**:
```json
{
  "success": true,
  "data": {},
  "message": "操作成功",
  "code": 200
}
```

## 6. 测试规范

### 6.1 测试分类
- **单元测试**: 针对单个函数或类的测试
- **集成测试**: 针对多个模块协同工作的测试
- **端到端测试**: 针对完整业务流程的测试

### 6.2 测试命名
- **描述性命名**: 测试函数名应清晰描述测试内容
- **test_前缀**: 所有测试函数以test_开头
- **示例**: test_user_login_success(), test_bank_transfer_insufficient_funds()

### 6.3 测试覆盖率
- **目标覆盖率**: 单元测试覆盖率不低于80%
- **关键代码**: 核心业务逻辑要求100%覆盖
- **定期检查**: 每个Sprint结束时检查测试覆盖率

## 7. 文档规范

### 7.1 README文档
- **项目介绍**: 清晰描述项目目标和功能
- **快速开始**: 提供快速启动指南
- **环境要求**: 列出运行环境要求
- **安装步骤**: 详细说明安装过程
- **使用说明**: 提供基本使用方法

### 7.2 API文档
- **接口说明**: 详细描述每个API的功能
- **参数说明**: 清晰列出所有参数及其含义
- **返回示例**: 提供典型返回结果示例
- **错误码**: 列出可能的错误码及含义

### 7.3 代码注释
- **复杂逻辑**: 复杂算法必须添加详细注释
- **业务规则**: 业务规则需要在代码中说明
- **关键决策**: 重要设计决策需要注释说明

## 8. 部署规范

### 8.1 环境配置
- **环境变量**: 敏感信息通过环境变量配置
- **配置文件**: 不同环境使用不同配置文件
- **示例**: config.dev.py, config.prod.py

### 8.2 容器化部署
- **Docker镜像**: 所有服务都必须提供Docker镜像
- **docker-compose**: 提供完整的docker-compose配置
- **健康检查**: 容器必须包含健康检查机制

### 8.3 监控与日志
- **日志级别**: 合理使用不同日志级别
- **结构化日志**: 使用结构化日志格式
- **监控指标**: 关键业务指标需要监控
- **告警机制**: 异常情况需要及时告警

通过遵循这些项目规则，确保团队协作的高效性和代码质量的一致性。